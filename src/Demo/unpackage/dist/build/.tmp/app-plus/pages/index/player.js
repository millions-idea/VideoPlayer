(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/player"],{1465:function(t,o,e){},"201c":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},i=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return i})},3152:function(t,o,e){"use strict";e.r(o);var n=e("201c"),i=e("b60e");for(var a in i)"default"!==a&&function(t){e.d(o,t,function(){return i[t]})}(a);e("84d8");var d=e("2877"),c=Object(d["a"])(i["default"],n["a"],n["b"],!1,null,"2ac4ceae",null);o["default"]=c.exports},"84d8":function(t,o,e){"use strict";var n=e("1465"),i=e.n(n);i.a},b60e:function(t,o,e){"use strict";e.r(o);var n=e("d756"),i=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(o,t,function(){return n[t]})}(a);o["default"]=i.a},d756:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=e("2f62");function i(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.forEach(function(o){a(t,o,e[o])})}return t}function a(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var d={data:function(){return{videoUrl:"",videoId:"",title:"正在加载中",data:{},isCollect:!1}},onLoad:function(t){this.videoId=t.videoId,this.title=t.title,this.poster=t.poster},onShow:function(){t.setNavigationBarTitle({title:this.title}),this.getData()},onReady:function(o){this.videoContext=t.createVideoContext("myVideo")},computed:i({},(0,n.mapState)(["hasLogin","profile"]),{getTitle:function(){return null!=this.title&&this.title.length>15?this.title.substr(0,14)+"...":"正在查询中"}}),methods:i({},(0,n.mapActions)(["setProfile","authOpenWindow"]),{onPlay:function(o){var e=this;this.data.buy||(this.videoContext.pause(),t.showToast({title:"您还没有购买视频资源哦",icon:"none"})),this.$api.get("api/product/player",{productId:this.videoId}).then(function(o){return console.log(o," at pages\\index\\player.vue:166"),e.common.Response.isFaild(o.data)?(t.showToast({title:"播放失败",icon:"none"}),void e.videoContext.pause()):e.common.Response.isException(o.data)?(t.showToast({title:"播放失败",icon:"none"}),void e.videoContext.pause()):void 0})},videoErrorCallback:function(o){t.showModal({content:"视频解析失败",showCancel:!1})},getData:function(){var o=this;t.showLoading({title:"请稍后"}),this.$api.get("api/product/getProduct",{productId:this.videoId}).then(function(e){t.hideLoading(),o.common.Response.isFaild(e.data)||o.common.Response.isException(e.data)&&(t.showToast({title:e.data.msg,icon:"none"}),setTimeout(function(){t.navigateBack({delta:1})},2e3)),o.data=e.data.msg,o.videoId=o.data.productId,o.title=o.data.productName,o.poster=o.data.image,o.isCollect=o.data.collect,o.data.amount=o.data.amount.toFixed(2),o.data.commonAmount=o.data.commonAmount.toFixed(2),o.data.adjoinList.forEach(function(t){t.amount=t.amount.toFixed(2),t.showCount=t.showCount>9999?(t.showCount/1e4).toFixed(1)+"万":t.showCount})})},collect:function(){this.isCollect=!0,this.$api.get("api/product/collect",{productId:this.videoId}).then(function(t){})},unCollect:function(){this.isCollect=!0,this.$api.get("api/product/unCollect",{productId:this.videoId}).then(function(t){})},watchOne:function(){this.hasLogin?this.common.window.toNew("payment/payment",{title:this.title+"-观看一次",amount:this.data.amount,id:this.videoId}):this.common.window.toNew("user/bootstrap/login",null)},watchPermanent:function(){this.hasLogin?this.common.window.toNew("payment/payment",{title:this.title+"-永久观看",amount:this.data.commonAmount,id:this.videoId}):this.common.window.toNew("user/bootstrap/login",null)},onAdjoin:function(t){this.common.window.toNew("index/player",{videoId:t.productId,title:t.productName,poster:t.image})},downloadApp:function(){this.common.window.toNew("generics-webview/generics-webview",{url:this.profile.yaboAppUrl})}})};o.default=d}).call(this,e("6e42")["default"])}},[["ba39","common/runtime","common/vendor"]]]);