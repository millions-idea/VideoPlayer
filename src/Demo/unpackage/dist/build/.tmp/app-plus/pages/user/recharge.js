(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/recharge"],{"57c4":function(e,t,n){"use strict";var a=n("8d6b"),o=n.n(a);o.a},8491:function(e,t,n){"use strict";n.r(t);var a=n("87b9"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},"87b9":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2f62");function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={data:function(){return{buttonDisabled:!0,changeValue:""}},computed:o({},(0,a.mapState)(["hasLogin","profile"]),{isInput:function(){return 0==this.changeValue.length}}),destroyed:function(){this.appEvents.$off("onInputPaymentPassword")},methods:o({},(0,a.mapActions)(["setProfile","authOpenWindow"]),{changeInput:function(e){this.changeValue=e.detail.value},nextStep:function(){this.useAlipay()},useAlipay:function(t){e.showLoading({title:"请稍后",mask:!0}),this.$api.get("api/order/getRechargeOrderInfo",{amount:this.changeValue}).then(function(t){e.hideLoading(),null!=t.data&&t.data.length>1?e.requestPayment({provider:"alipay",orderInfo:t.data,success:function(t){console.log("success:"+JSON.stringify(t)," at pages\\user\\recharge.vue:85"),e.showToast({icon:"none",title:"支付成功, 稍后跳转……"}),setTimeout(function(){e.reLaunch({url:"../index/index"})},3e3)},fail:function(t){console.log("fail:"+JSON.stringify(t)," at pages\\user\\recharge.vue:98"),this.session.setValue("recharge_alipay_error",JSON.stringify(t)),e.showToast({icon:"none",title:"支付失败, 错误代码:["+JSON.stringify(t)+"]"}),setTimeout(function(){e.navigateBack({delta:1})},1e3)}}):(e.hideLoading(),e.showToast({title:"拉起支付请求失败",icon:"none"}))})},useWxpay:function(t){e.showLoading({title:"请稍后",mask:!0}),this.$api.get("api/wx/recharge",{totalFee:_self.amount}).then(function(t){if(e.hideLoading(),null!=t.data&&JSON.stringify(t.data).length>5)try{WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.appId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:t.data.signType,paySign:t.data.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?(console.log("支付成功"," at pages\\user\\recharge.vue:149"),e.showToast({icon:"none",title:"支付成功, 稍后跳转……"}),setTimeout(function(){e.reLaunch({url:"../index/index"})},3e3)):"get_brand_wcpay_request:cancel"==t.err_msg?(console.log("支付取消"," at pages\\user\\recharge.vue:161"),e.showToast({icon:"none",title:"支付中途取消"}),setTimeout(function(){e.navigateBack({delta:1})},1e3)):"get_brand_wcpay_request:fail"==t.err_msg&&(console.log("支付失败"," at pages\\user\\recharge.vue:172"),_self.session.setValue("recharge_wxpay_error",JSON.stringify(err)),e.showToast({icon:"none",title:"支付失败"}),setTimeout(function(){e.navigateBack({delta:1})},1e3))})}catch(n){_self.common.window.logger("getBrandWCPayRequest_exception_"+JSON.stringify(n)),e.hideLoading(),e.showToast({title:"拉起支付请求失败",icon:"none"})}else e.hideLoading(),e.showToast({title:"拉起支付请求失败",icon:"none"})})}})};t.default=r}).call(this,n("6e42")["default"])},"8d6b":function(e,t,n){},fad6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},ffa1:function(e,t,n){"use strict";n.r(t);var a=n("fad6"),o=n("8491");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("57c4");var r=n("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"49a127d9",null);t["default"]=s.exports}},[["eae4","common/runtime","common/vendor"]]]);