(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/order"],{"4db5":function(t,e,a){},"5c6a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"8dcd":function(t,e,a){"use strict";(function(t){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return a.e("graceUI/components/graceLoading").then(a.bind(null,"101f"))},s=function(){return a.e("components/stack-empty/stack-empty").then(a.bind(null,"a56a"))},o=function(){return a.e("components/uni-nav-bar/uni-nav-bar").then(a.bind(null,"4e59"))},r={data:function(){return{tabCurrentIndex:0,swiperCurrentIndex:0,tabHeight:300,tabs:[{name:"全部",id:"all",loadingType:0,page:1},{name:"待付款",id:"wait",loadingType:0,page:1},{name:"已完成",id:"finish",loadingType:0,page:1}],dataList:[[],[],[]],maxPage:0,title:"",date:"",type:0,amount:"",id:"",balance:"",isShowDetail:!1,scrollTop:0,graceSkeleton:"ing"}},onLoad:function(){n=this,this.getList(0,null),setTimeout(function(){n.graceSkeleton="end"},5e3)},onReady:function(){t.getSystemInfo({success:function(e){var a=e.windowHeight,i=t.createSelectorQuery().select("#grace-tab-title");i.fields({size:!0},function(t){t&&(n.tabHeight=a-t.height)}).exec(),i=t.createSelectorQuery().select(".uni-navbar"),i.fields({size:!0},function(t){t&&(n.tabHeight=n.tabHeight-(t.height+20))}).exec()}})},watch:{isShowDetail:function(e){e&&t.pageScrollTo({scrollTop:0,duration:0})}},onPageScroll:function(e){this.isShowDetail&&t.pageScrollTo({scrollTop:0,duration:300})},onBackPress:function(){return!!this.isShowDetail&&(this.isShowDetail=!1,!0)},methods:{copyCdkey:function(e){t.setClipboardData({data:e,success:function(){t.showToast({title:"复制成功",icon:"none"})}})},tabChange:function(t){var e=t.target.id.replace("tabTag-","");this.swiperCurrentIndex=e,this.tabCurrentIndex=e},swiperChange:function(t){var e=t.detail.current;this.tabCurrentIndex=e,console.log("当前tabCurrentIndex"+this.tabCurrentIndex," at pages\\user\\order.vue:248")},scrollend:function(t){var e=t.currentTarget.dataset.scindex;if(console.log(e," at pages\\user\\order.vue:254"),console.log(this.tabs[e].id," at pages\\user\\order.vue:256"),1===this.tabs[e].loadingType)return!1;console.log(this.tabs[e].page," at pages\\user\\order.vue:263"),this.tabs[e].page>this.maxPage?this.tabs[e].loadingType=2:(this.tabs[e].loadingType=1,this.getList(n.tabs[e].page,function(t){var a=t,i=t.filter(function(t){return 0===t.status}),s=t.filter(function(t){return 2===t.status});0==e?n.dataList[e]=n.dataList[e].concat(a):1==e?n.dataList[e]=n.dataList[e].concat(i):2==e&&(n.dataList[e]=n.dataList[e].concat(s)),n.tabs[e].page++,n.tabs[e].loadingType=0}))},showDetail:function(t){this.id=t.id,this.desc=t.desc,this.date=t.date,this.type=t.type,this.amount=t.amount,this.balance=t.balance,this.isShowDetail=!0},backUp:function(){this.isShowDetail?this.isShowDetail=!1:t.navigateBack({delta:1})},getList:function(e,a){var n=this,i={};-1!=e&&(i={page:e}),t.showLoading({title:"请稍后",mask:!1}),this.$api.get("api/order/getOrders",i).then(function(e){if(n.common.Response.isFaild(e.data))t.showToast({title:"获取数据失败",icon:"none"});else if(n.common.Response.isException(e.data))t.showToast({title:e.data.msg,icon:"none"});else if(n.maxPage=e.data.count,t.hideLoading(),e.data.data.forEach(function(t){switch(t.productName.length>13?t.shortProductName=n.common.String.textLimit(t.productName,13):t.shortProductName=t.productName,t.statusText="-",t.status){case 0:t.statusText="待付款";break;case 1:t.statusText="待发货";break;case 2:t.statusText="已完成";break;default:t.statusText="已冻结";break}}),null!=a)a(e.data.data);else{var i=e.data.data,s=e.data.data.filter(function(t){return 0===t.status}),o=e.data.data.filter(function(t){return 2===t.status}),r=[[],[],[]];r[0]=n.dataList[0].concat(i),r[1]=n.dataList[1].concat(s),r[2]=n.dataList[2].concat(o),n.dataList=r}}),setTimeout(function(){t.hideLoading()},5e3)}},components:{graceLoading:i,stackEmpty:s,uniNavBar:o}};e.default=r}).call(this,a("6e42")["default"])},b98c:function(t,e,a){"use strict";var n=a("4db5"),i=a.n(n);i.a},fd74:function(t,e,a){"use strict";a.r(e);var n=a("5c6a"),i=a("febf");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("b98c");var o=a("2877"),r=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"fa03364a",null);e["default"]=r.exports},febf:function(t,e,a){"use strict";a.r(e);var n=a("8dcd"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a}},[["5526","common/runtime","common/vendor"]]]);