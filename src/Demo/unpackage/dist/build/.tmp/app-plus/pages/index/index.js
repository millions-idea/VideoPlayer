(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2bb3":function(t,n,e){"use strict";var o=e("5f85"),i=e.n(o);i.a},"3c61":function(t,n,e){"use strict";e.r(n);var o=e("ebbb"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);n["default"]=i.a},"5f85":function(t,n,e){},"6a8a":function(t,n,e){"use strict";e.r(n);var o=e("78e2"),i=e("3c61");for(var a in i)"default"!==a&&function(t){e.d(n,t,function(){return i[t]})}(a);e("2bb3");var s=e("2877"),c=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,"ae2da458",null);n["default"]=c.exports},"78e2":function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return i})},ebbb:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("2f62");function i(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){a(t,n,e[n])})}return t}function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var s,c=0,r=function(){return e.e("components/jing-swiper/jing-swiper").then(e.bind(null,"4265"))},u=function(){return e.e("graceUI/components/graceLoading").then(e.bind(null,"101f"))},l=function(){return e.e("components/stack-empty/stack-empty").then(e.bind(null,"a56a"))},d={components:{jingSwiper:r,graceLoading:u,stackEmpty:l},data:function(){return{loading:!1,loadingType:0,isEnd:!1,dataList:[],cid:0,maxPage:1e3,empty:!0,imgList:[{img:"https://stack-1251694474.cos.ap-guangzhou.myqcloud.com/aishi/banner1.png",desc:""},{img:"https://stack-1251694474.cos.ap-guangzhou.myqcloud.com/aishi/banner2.png",desc:""},{img:"https://stack-1251694474.cos.ap-guangzhou.myqcloud.com/aishi/banner3.png",desc:""}]}},onLoad:function(){s=this,c=0},onShow:function(){this.getList()},computed:i({},(0,o.mapState)(["hasLogin","profile"])),onPullDownRefresh:function(){console.log("onPullDownRefresh"," at pages\\index\\index.vue:107"),this.getBanner(),this.getProfile(),this.getList()},onReachBottom:function(){this.getList()},onBackPress:function(){this.loadingType=0,this.isEnd=!1,c=0},methods:i({},(0,o.mapActions)(["setProfile","authOpenWindow","login","sysLogout"]),{getBanner:function(){var t=this,n=this.session.getValue("homeBanner");null!=n&&JSON.stringify(n).length>5&&(this.imgList=n),this.$api.get("api/bootstrap/getBannerList",{}).then(function(n){t.common.Response.isFaild(n.data)||t.common.Response.isException(n.data)||(t.imgList=n.data.data,t.session.setValue("homeBanner",t.imgList))})},getList:function(){if(c>this.maxPage)return this.isEnd=!0,this.loadingType=2,void t.stopPullDownRefresh();this.loadingType=1;var n=this;this.$api.get("api/home/getNewProductLimit",{page:c}).then(function(e){t.stopPullDownRefresh(),n.loadingType=3,200==e.data.code&&(n.maxPage=e.data.count,null!=e.data.data&&0!=e.data.data.length||(n.loadingType=3,t.showToast({title:"没有最近更新的视频哦",icon:"none"})),e.data.data.forEach(function(t){t.amount=t.amount.toFixed(2),t.showCount=t.showCount>9999?(t.showCount/1e4).toFixed(1)+"万":t.showCount}),n.dataList=n.dataList.concat(e.data.data),n.loadingType=0,c++)})},getProfile:function(){this.session.clearSession(),this.session.clearState();var n=this.session.getSession();if(null==n){console.log("加载用户信息"," at pages\\index\\index.vue:185");var e=this;this.$api.post("api/user/getProfile",{}).then(function(n){if(!e.common.Response.isFaild(n.data))if(e.common.Response.isException(n.data)){if("请先登录"==n.data.msg)return;t.showToast({title:n.data.msg,icon:"none"})}else e.session.setSession(n.data.msg),e.login(),e.setProfile(n.data.msg)}).catch(function(t){})}else console.log("更新用户信息"," at pages\\index\\index.vue:210"),s.setProfile(n)},onSwiperClick:function(t){-1!=t.desc.indexOf("http")?this.common.window.toNew("generics-webview/generics-webview",{url:t.desc}):this.hasLogin?this.common.window.toNew("index/player",{videoId:t.desc}):this.common.window.toNew("user/bootstrap/login",null)},onPlay:function(t){this.hasLogin?this.common.window.toNew("index/player",{videoId:t.productId,title:t.productName,poster:t.image}):this.common.window.toNew("user/bootstrap/login",null)}})};n.default=d}).call(this,e("6e42")["default"])}},[["8bc9","common/runtime","common/vendor"]]]);